<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="./js/vconsole.js"></script>
    <script>
        var vConsole = new VConsole();
    </script>
    <script src="./js/jweixin-1.4.0.js"></script>
    <script src="./js/jquery.min.js"></script>
    <title>Document</title>
    <style>
        li {
            border: 1px solid rgb(0, 0, 0);
            width: 100px;
            text-align: center;
            float: left;
            list-style: none;
        }
    </style>
</head>

<body>
    <ul style="overflow:hidden;">
        <li onclick="dj(0)">锁客版0.01/￥</li>
        <li onclick="dj(1)">尊享版0.02/￥</li>
        <li onclick="dj(2)">钻石版0.02/￥</li>
    </ul>
    <button id="zhifu">确认支付</button>
</body>
<script>
    var li_li = document.getElementsByTagName("li");
    function dj(e) {
        // alert(li_li[e].innerHTML);
        // alert(e);
        for (i = 0; i < 3; i++) {
            if (e == i) {
                li_li[i].style.background = " rgb(102, 234, 243)";
            } else {
                li_li[i].style.background = "white";
            }
        }
    }
    
    //点击调用支付
   $.get("http://wx.mc2.top/demo.php", function (data, status) {
        wx.config({
            debug: true,
            appId: data["appId"],
            timestamp: data["timestamp"],
            nonceStr: data["nonceStr"],
            signature: data["signature"],
            jsApiList: [
                'chooseWXPay'
            ]
        });
        
        wx.ready(function (res) {
            // 在这里调用 API 
            console.log("成功");
            document.getElementById("zhifu").onclick = function () {
                wx.chooseWXPay({
                    timestamp: data["timestamp"], // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符
                    nonceStr: data["nonceStr"], // 支付签名随机串，不长于 32 位
                    package: data["package"], //统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=\*\*\*）
                    signType: 'MD5', // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'
                    paySign: data["paySign"], // 支付签名
                    success: function (res) {
                        // 支付成功后的回调函数
                        alert("支付成功");
                    }
                });
            }
        });
        wx.error(function (res) {
            alert(res.errMsg);
        });
    });









</script>

</html>